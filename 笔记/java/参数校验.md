## 1. 注解

### 1.1. Bean Validation 定义的约束注解

- 空和非空检查
  - `@NotBlank` ：只能用于字符串不为 `null` ，并且字符串 `#trim()` 以后 length 要大于 0 。
  - `@NotEmpty` ：集合对象的元素不为 0 ，即集合不为空，也可以用于字符串不为 `null` 。
  - `@NotNull` ：不能为 `null` 。
  - `@Null` ：必须为 `null` 。

- 数值检查
  - `@DecimalMax(value)` ：被注释的元素必须是一个数字，其值必须小于等于指定的最大值。
  - `@DecimalMin(value)` ：被注释的元素必须是一个数字，其值必须大于等于指定的最小值。
  - `@Digits(integer, fraction)` ：被注释的元素必须是一个数字，其值必须在可接受的范围内。
  - `@Positive` ：判断正数。
  - `@PositiveOrZero` ：判断正数或 0 。
  - `@Max(value)` ：该字段的值只能小于或等于该值。
  - `@Min(value)` ：该字段的值只能大于或等于该值。
  - `@Negative` ：判断负数。
  - `@NegativeOrZero` ：判断负数或 0 。

- Boolean 值检查
  - `@AssertFalse` ：被注释的元素必须为 `true` 。
  - `@AssertTrue` ：被注释的元素必须为 `false` 。

- 长度检查
  - `@Size(max, min)` ：检查该字段的 `size` 是否在 `min` 和 `max` 之间，可以是字符串、数组、集合、Map 等。

- 日期检查
  - `@Future` ：被注释的元素必须是一个将来的日期。
  - `@FutureOrPresent` ：判断日期是否是将来或现在日期。
  - `@Past` ：检查该字段的日期是在过去。
  - `@PastOrPresent` ：判断日期是否是过去或现在日期。

- 其它检查
  - `@Email` ：被注释的元素必须是电子邮箱地址。
  - `@Pattern(value)` ：被注释的元素必须符合指定的正则表达式。

### 1.2 Hibernate Validator 附加的约束注解

[`org.hibernate.validator.constraints`](https://github.com/hibernate/hibernate-validator/tree/master/engine/src/main/java/org/hibernate/validator/constraints) 包下，定义了一系列的约束( constraint )注解。如下：

- `@Range(min=, max=)` ：被注释的元素必须在合适的范围内。
- `@Length(min=, max=)` ：被注释的字符串的大小必须在指定的范围内。
- `@URL(protocol=,host=,port=,regexp=,flags=)` ：被注释的字符串必须是一个有效的 URL 。
- `@SafeHtml` ：判断提交的 HTML 是否安全。例如说，不能包含 javascript 脚本等等。
- ... 等等，就不一一列举了。



## 2. 使用入门





## 3. 自定义注解

**第一步，新建 `@Mobile` 注解，并设置自定义校验器为**

```java
@Target({
        ElementType.METHOD,
        ElementType.FIELD,
        ElementType.ANNOTATION_TYPE,
        ElementType.CONSTRUCTOR,
        ElementType.PARAMETER,
        ElementType.TYPE_USE
})
@Retention(RetentionPolicy.RUNTIME)
@Documented
@Constraint(
        validatedBy = MobileValidator.class // 设置校验器
)
public @interface Mobile {

    String message() default "手机号格式不正确";

    Class<?>[] groups() default {};

    Class<? extends Payload>[] payload() default {};

}
```

**第二步，新建``MobileValidator` 校验器 代码如下** 

```java
public class MobileValidator implements ConstraintValidator<Mobile, String> {

    @Override
    public void initialize(Mobile annotation) {
    }

    @Override
    public boolean isValid(String value, ConstraintValidatorContext context) {
        // 如果手机号为空，默认不校验，即校验通过
        if (StrUtil.isEmpty(value)) {
            return true;
        }
        // 校验手机
        return ValidationUtils.isMobile(value);
    }

}
```

**第三步，在需要手机格式校验的参数上添加`@Mobile` 注解。实例代码如下**

```java
public class AppAuthLoginReqVO {

    @NotEmpty(message = "手机号不能为空")
    @Mobile // <=== here
    private String mobile;

}
```